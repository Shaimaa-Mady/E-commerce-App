"use strict";(self.webpackChunkFreshcart=self.webpackChunkFreshcart||[]).push([[290],{5290:(g,d,n)=>{n.r(d),n.d(d,{CartComponent:()=>x});var l=n(6814),p=n(1120),m=n(460),t=n(4769),_=n(6286);function f(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t._UZ(2,"img",10),t.qZA(),t.TgZ(3,"div",11)(4,"div")(5,"h3",12),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"p",13),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"button",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.removeItem(c.product._id))}),t._UZ(12,"i",15),t._uU(13," Remove "),t.qZA()(),t.TgZ(14,"div")(15,"button",16,17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(16),C=t.MAs(21),b=t.oxw(2);return t.KtG(b.changeQuantity(c.count+1,c.product._id,a,C))}),t._uU(17," + "),t.qZA(),t.TgZ(18,"span"),t._uU(19),t.qZA(),t.TgZ(20,"button",16,18),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(16),C=t.MAs(21),b=t.oxw(2);return t.KtG(b.changeQuantity(c.count-1,c.product._id,a,C))}),t._uU(22," - "),t.qZA()()()()}if(2&o){const e=h.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(t.xi3(7,5,e.product.title,10)),t.xp6(3),t.hij(" ",t.xi3(10,8,e.price," ")," EGP "),t.xp6(10),t.hij(" ",e.count," ")}}const i=function(o){return["/payment",o]};function u(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h2"),t._uU(3,"Cart shop"),t.qZA()(),t.TgZ(4,"p",4),t._uU(5),t.ALo(6,"currency"),t.qZA(),t.YNc(7,f,23,11,"div",5),t.TgZ(8,"button",6),t._uU(9," Check out "),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clearAll())}),t._uU(11," Clear Your Cart "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.hij(" Total Price: ",t.xi3(6,3,e.cartProductDetails.totalCartPrice," ")," "),t.xp6(2),t.Q6J("ngForOf",e.cartProductDetails.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,i,e.cartProductDetails._id))}}function v(o,h){1&o&&(t.TgZ(0,"h3",19),t._uU(1," Shop cart "),t._UZ(2,"br")(3,"br"),t._uU(4," Your cart is Empty "),t.qZA())}let x=(()=>{class o{constructor(e,r){this._CartService=e,this._Renderer2=r,this.cartProductDetails=null}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{this.cartProductDetails=e.data},error:e=>{console.log(e)}})}removeItem(e){this._CartService.removeProductCart(e).subscribe({next:r=>{this.cartProductDetails=r.data,this._CartService.cartNumber.next(r.numOfCartItems)},error:r=>{console.log(r)}})}changeQuantity(e,r,s,c){e>=1?(this._Renderer2.setAttribute(s,"disabled","true"),this._Renderer2.setAttribute(c,"disabled","true"),this._CartService.updateQuantity(e,r).subscribe({next:a=>{this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(c,"disabled"),this.cartProductDetails=a.data},error:a=>{this._Renderer2.removeAttribute(s,"disabled"),this._Renderer2.removeAttribute(c,"disabled")}})):this.removeItem(r)}clearAll(){this._CartService.clearCart().subscribe({next:e=>{"success"===e.message&&(this.cartProductDetails=null,this._CartService.cartNumber.next(0))},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(_.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","w-75 mx-auto rounded shadow p-3 my-5",4,"ngIf","ngIfElse"],["info",""],[1,"w-75","mx-auto","rounded","shadow","p-3","my-5"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bolder"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"fs-6","main-btn","mt-3","d-inline-block","fw-bolder","py-2","bg-primary","me-3",3,"routerLink"],[1,"text-white","fw-bolder","fs-6","btn","bg-danger","py-2","d-inline-block",3,"click"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h6","fw-bolder"],[1,"fw-bolder","text-main","small","m-0"],[1,"text-danger","btn","m-0","p-0","small","fw-bolder",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"btn","btn-sm","border-success","fw-bold",3,"click"],["plus",""],["Subtract",""],[1,"fw-bolder","py-5","ps-3","bg-danger"]],template:function(r,s){if(1&r&&(t.YNc(0,u,12,8,"section",0),t.YNc(1,v,5,0,"ng-template",null,1,t.W1O)),2&r){const c=t.MAs(2);t.Q6J("ngIf",s.cartProductDetails)("ngIfElse",c)}},dependencies:[l.ez,l.sg,l.O5,l.H9,p.rH,m.r]})}return o})()},6286:(g,d,n)=>{n.d(d,{N:()=>t});var l=n(5619),p=n(4769),m=n(9862);let t=(()=>{class _{constructor(i){this._HttpClient=i,this.baseUrl="https://ecommerce.routemisr.com",this.cartNumber=new l.X(0)}addToCart(i){return this._HttpClient.post(this.baseUrl+"/api/v1/cart",{productId:i})}getUserCart(){return this._HttpClient.get(this.baseUrl+"/api/v1/cart")}removeProductCart(i){return this._HttpClient.delete(this.baseUrl+`/api/v1/cart/${i}`)}updateQuantity(i,u){return this._HttpClient.put(this.baseUrl+`/api/v1/cart/${u}`,{count:i})}clearCart(){return this._HttpClient.delete(this.baseUrl+"/api/v1/cart")}checkOut(i,u){return this._HttpClient.post(this.baseUrl+`/api/v1/orders/checkout-session/${i}?url=https://github.com/AhmedElsoudy/E-commerce-app.git`,{shippingAddress:u})}static#t=this.\u0275fac=function(u){return new(u||_)(p.LFG(m.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);