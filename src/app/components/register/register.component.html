<section>
  <div class="container">
    <div class="my-4 shadow rounded-4 bg-main-light p-4">
      <h2 class="fw-normal fs-3">Register Now</h2>
      <form [formGroup]="registerForm" (ngSubmit)="handleForm()">
        <div
          *ngIf="msgError"
          class="text-center alert alert-danger fw-bolder pt-2"
        >
          {{ msgError }}
        </div>
        <div class="input-name mb-2">
          <label for="name">name :</label>
          <input
            formControlName="name"
            type="text"
            id="name"
            class="form-control"
            #inputName
          />
          <div
            class="alert alert-danger small mt-2 py-2"
            *ngIf="
              registerForm.get('name')?.errors &&
              (registerForm.get('name')?.touched || inputName.value.length > 0)
            "
          >
            <p
              class="mb-0"
              *ngIf="registerForm.get('name')?.getError('required')"
            >
              Name is required
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('name')?.getError('minlength')"
            >
              Min length 3
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('name')?.getError('maxlength')"
            >
              Max length 20
            </p>
          </div>
        </div>

        <div class="input-email mb-2">
          <label for="email">Email :</label>
          <input
            formControlName="email"
            type="email"
            id="email"
            class="form-control"
            #inputEmail
          />
          <div
            class="alert alert-danger small mt-2 py-2"
            *ngIf="
              registerForm.get('email')?.errors &&
              (registerForm.get('email')?.touched ||
                inputEmail.value.length > 0)
            "
          >
            <p
              class="mb-0"
              *ngIf="registerForm.get('email')?.getError('required')"
            >
              Email is required
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('email')?.getError('email')"
            >
              Email is invalid
            </p>
          </div>
        </div>

        <div class="input-password mb-2">
          <label for="password">Password :</label>
          <input
            formControlName="password"
            type="password"
            id="password"
            class="form-control"
            #inputPassword
          />
          <div
            class="alert alert-danger small mt-2 py-2"
            *ngIf="
              registerForm.get('password')?.errors &&
              (registerForm.get('password')?.touched ||
                inputPassword.value.length > 0)
            "
          >
            <p
              class="mb-0"
              *ngIf="registerForm.get('password')?.getError('required')"
            >
              Password is required
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('password')?.getError('pattern')"
            >
              Start with capital letter then from 5 to 8 numbers or small
              letters
            </p>
          </div>
        </div>

        <div class="input-rePassword mb-2">
          <label for="rePassword">Re-password :</label>
          <input
            formControlName="rePassword"
            class="w-50 mx-auto small text-center"
            type="password"
            id="rePassword"
            class="form-control"
            #inputRePassword
          />
          <div
            class="alert alert-danger small mt-2 py-2"
            *ngIf="
              registerForm.get('rePassword')?.errors &&
              (registerForm.get('rePassword')?.touched ||
                inputRePassword.value.length > 0)
            "
          >
            <p
              class="mb-0"
              *ngIf="registerForm.get('rePassword')?.getError('required')"
            >
              Re-password is required
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('rePassword')?.getError('mismatch')"
            >
              Start with capital letter then from 5 to 8 numbers or small
              letters
            </p>
          </div>
        </div>

        <div class="input-phone mb-2">
          <label for="phone">Phone :</label>
          <input
            formControlName="phone"
            type="tel"
            id="phone"
            class="form-control"
            #inputPhone
          />
          <div
            class="alert alert-danger small mt-2 py-2"
            *ngIf="
              registerForm.get('phone')?.errors &&
              (registerForm.get('phone')?.touched ||
                inputPhone.value.length > 0)
            "
          >
            <p
              class="mb-0"
              *ngIf="registerForm.get('phone')?.getError('required')"
            >
              Phone is required
            </p>
            <p
              class="mb-0"
              *ngIf="registerForm.get('phone')?.getError('pattern')"
            >
              Enter valid egyptian phone number
            </p>
          </div>
        </div>

        <button class="main-btn my-2 ms-auto d-block py-2 fw-bolder">
          <span *ngIf="isLoading"
            ><i class="fa-solid fa-spinner fa-spin"></i
          ></span>

          Register Now
        </button>
      </form>
    </div>
  </div>
</section>
